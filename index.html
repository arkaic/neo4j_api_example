<!DOCTYPE html>
<html>

<head>
<script src="http://code.jquery.com/jquery-3.3.1.min.js"></script>
</head>

<body>
    <h>Create Employee</h>
    <form action="http://localhost:3000/create_employee" method="post">
        Name: <input type="text" name="name"><br>
        Id: <input type="text" name="emp_id"><br>
        <input type="submit" value="Create Employee">
    </form>

    <br/>

    <button id="get-emp">Get employees</button>

    <table id="empl-table">
        <tr>
            <th>ID</th>
            <th>Name</th>
        </tr>
    </table>
</body>

<script>
    $(document).ready(function(){
        $("#get-emp").click(function(){
            console.log('blah');
            fetch('http://localhost:3000/get_all_employees', {mode: 'cors'}).then(function(response) {
                return response.json();
            }).then(function(employees) {
                // console.log(JSON.stringify(data));
                
                let table = document.getElementById("empl-table");
                table.innerHTML = '';
                for (let employee of employees) {
                    let row = table.insertRow(0);
                    
                    var cell1 = row.insertCell(0);
                    var cell2 = row.insertCell(1);

                    // Add some text to the new cells:
                    cell1.innerHTML = employee.emp_id;
                    cell2.innerHTML = employee.name;
                }
            });
        });
    });
</script>

</html>